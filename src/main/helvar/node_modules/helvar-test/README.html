<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-alpha/dist/katex.min.css" integrity="sha384-BTL0nVi8DnMrNdMQZG1Ww6yasK9ZGnUxL1ZWukXQ7fygA1py52yPp9W4wrR00VML" crossorigin="anonymous">
        <style>
/*--------------------------------------------------------------------------------------------- * Copyright (c) Microsoft Corporation. All rights reserved. * Licensed under the MIT License. See License.txt in the project root for license information. *--------------------------------------------------------------------------------------------*/ body { font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback"; font-size: 14px; padding: 0 26px; line-height: 22px; word-wrap: break-word; } #code-csp-warning { position: fixed; top: 0; right: 0; color: white; margin: 16px; text-align: center; font-size: 12px; font-family: sans-serif; background-color:#444444; cursor: pointer; padding: 6px; box-shadow: 1px 1px 1px rgba(0,0,0,.25); } #code-csp-warning:hover { text-decoration: none; background-color:#007acc; box-shadow: 2px 2px 2px rgba(0,0,0,.25); } body.scrollBeyondLastLine { margin-bottom: calc(100vh - 22px); } body.showEditorSelection .code-line { position: relative; } body.showEditorSelection .code-active-line:before, body.showEditorSelection .code-line:hover:before { content: ""; display: block; position: absolute; top: 0; left: -12px; height: 100%; } body.showEditorSelection li.code-active-line:before, body.showEditorSelection li.code-line:hover:before { left: -30px; } .vscode-light.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(0, 0, 0, 0.15); } .vscode-light.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(0, 0, 0, 0.40); } .vscode-light.showEditorSelection .code-line .code-line:hover:before { border-left: none; } .vscode-dark.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(255, 255, 255, 0.4); } .vscode-dark.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(255, 255, 255, 0.60); } .vscode-dark.showEditorSelection .code-line .code-line:hover:before { border-left: none; } .vscode-high-contrast.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(255, 160, 0, 0.7); } .vscode-high-contrast.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(255, 160, 0, 1); } .vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before { border-left: none; } img { max-width: 100%; max-height: 100%; } a { text-decoration: none; } a:hover { text-decoration: underline; } a:focus, input:focus, select:focus, textarea:focus { outline: 1px solid -webkit-focus-ring-color; outline-offset: -1px; } hr { border: 0; height: 2px; border-bottom: 2px solid; } h1 { padding-bottom: 0.3em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; } h1, h2, h3 { font-weight: normal; } h1 code, h2 code, h3 code, h4 code, h5 code, h6 code { font-size: inherit; line-height: auto; } table { border-collapse: collapse; } table > thead > tr > th { text-align: left; border-bottom: 1px solid; } table > thead > tr > th, table > thead > tr > td, table > tbody > tr > th, table > tbody > tr > td { padding: 5px 10px; } table > tbody > tr + tr > td { border-top: 1px solid; } blockquote { margin: 0 7px 0 5px; padding: 0 16px 0 10px; border-left-width: 5px; border-left-style: solid; } code { font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback"; font-size: 14px; line-height: 19px; } body.wordWrap pre { white-space: pre-wrap; } .mac code { font-size: 12px; line-height: 18px; } pre:not(.hljs), pre.hljs code > div { padding: 16px; border-radius: 3px; overflow: auto; } /** Theming */ pre code { color: var(--vscode-editor-foreground); } .vscode-light pre:not(.hljs), .vscode-light code > div { background-color: rgba(220, 220, 220, 0.4); } .vscode-dark pre:not(.hljs), .vscode-dark code > div { background-color: rgba(10, 10, 10, 0.4); } .vscode-high-contrast pre:not(.hljs), .vscode-high-contrast code > div { background-color: rgb(0, 0, 0); } .vscode-high-contrast h1 { border-color: rgb(0, 0, 0); } .vscode-light table > thead > tr > th { border-color: rgba(0, 0, 0, 0.69); } .vscode-dark table > thead > tr > th { border-color: rgba(255, 255, 255, 0.69); } .vscode-light h1, .vscode-light hr, .vscode-light table > tbody > tr + tr > td { border-color: rgba(0, 0, 0, 0.18); } .vscode-dark h1, .vscode-dark hr, .vscode-dark table > tbody > tr + tr > td { border-color: rgba(255, 255, 255, 0.18); } 
</style>
<style>
/* Tomorrow Theme */ /* http://jmblog.github.com/color-themes-for-google-code-highlightjs */ /* Original theme - https://github.com/chriskempson/tomorrow-theme */ /* Tomorrow Comment */ .hljs-comment, .hljs-quote { color: #8e908c; } /* Tomorrow Red */ .hljs-variable, .hljs-template-variable, .hljs-tag, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-regexp, .hljs-deletion { color: #c82829; } /* Tomorrow Orange */ .hljs-number, .hljs-built_in, .hljs-builtin-name, .hljs-literal, .hljs-type, .hljs-params, .hljs-meta, .hljs-link { color: #f5871f; } /* Tomorrow Yellow */ .hljs-attribute { color: #eab700; } /* Tomorrow Green */ .hljs-string, .hljs-symbol, .hljs-bullet, .hljs-addition { color: #718c00; } /* Tomorrow Blue */ .hljs-title, .hljs-section { color: #4271ae; } /* Tomorrow Purple */ .hljs-keyword, .hljs-selector-tag { color: #8959a8; } .hljs { display: block; overflow-x: auto; color: #4d4d4c; padding: 0.5em; } .hljs-emphasis { font-style: italic; } .hljs-strong { font-weight: bold; }
</style>
<style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'HelveticaNeue-Light', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
    </head>
    <body>
        <h1 id="assignment">Assignment</h1>
<h2 id="specification">Specification</h2>
<p>Suppose that a nodejs package named 'helvar-test' (enclosed as helvar-test-1.0.0.tgz) is ready for integration test. The package reads a message from a JSON file then retrieves devices and saves them to redis database which is running as a docker container. Your task is to write integration tests in Python to verify that the devices in JSON file are stored at redis database correctly.</p>
<p>The message format in json file is defined as json schema (enclosed as schema.json) and an example of JSON file looks like:</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"header"</span>: {
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0"</span> // string
  },
  <span class="hljs-attr">"payload"</span>: [ // array
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"1000"</span>, // string
      <span class="hljs-attr">"info"</span>: <span class="hljs-string">"Device A"</span> // string
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"1001"</span>, // string
      <span class="hljs-attr">"info"</span>: <span class="hljs-string">"Device B"</span> // string
    }
  ]
}
</div></code></pre>
<p>The devices stored in redis (host='localhost', port=6379) can be accessed by <em>redis-py</em>, a redis python client. <a href="https://www.bogotobogo.com/python/python_redis_with_python.php">This tutorial</a> demonstrates how to use it. Since redis is a key-value based database, thus the <em>key</em> for devices is 'helvar' and the <em>value</em> for devices is <a href="https://redis.io/topics/data-types#hashes">hashes</a> which contain all devices. In hashes, each device is identified by its 'id'. Suppose that the above example JSON is used, some redis <a href="https://redis.io/commands#hash">hash commands</a> can be used to check the devices:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># get all devices</span>
127.0.0.1:6379&gt; hgetall helvar
1) <span class="hljs-string">"1000"</span>
2) <span class="hljs-string">"Device A"</span>
3) <span class="hljs-string">"1001"</span>
4) <span class="hljs-string">"Device B"</span>
<span class="hljs-comment"># get total number of devices</span>
127.0.0.1:6379&gt; hlen helvar
(<span class="hljs-built_in">integer</span>) 2
<span class="hljs-comment"># get device whose id is 1000</span>
127.0.0.1:6379&gt; hget helvar 1000
<span class="hljs-string">"Device A"</span>
<span class="hljs-comment"># get device whose id is 1001</span>
127.0.0.1:6379&gt; hget helvar 1001
<span class="hljs-string">"Device B"</span>
<span class="hljs-comment"># clear database</span>
127.0.0.1:6379&gt; del helvar
(<span class="hljs-built_in">integer</span>) 1
</div></code></pre>
<h2 id="requirements">Requirements</h2>
<ul>
<li>
<p>automated integration tests written in Python</p>
</li>
<li>
<p>positive and negative test cases are provided</p>
</li>
<li>
<p>source codes and documents are submitted</p>
</li>
<li>
<p>automated setup/teardown is a plus</p>
</li>
<li>
<p>performance test case (10k+ devices in JSON file) is a plus</p>
</li>
</ul>
<h2 id="guides-to-perform-tests-manually">Guides to Perform Tests Manually</h2>
<h3 id="prerequisite">Prerequisite</h3>
<ol>
<li>
<p>install nodejs LTS (8.x)</p>
<ul>
<li>
<p>Ubuntu/Debian:</p>
<pre class="hljs"><code><div>curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
sudo apt-get install -y nodejs
</div></code></pre>
</li>
<li>
<p>MacOS:</p>
<p>Download macOS installer directly from <a href="https://nodejs.org/dist/v8.12.0/node-v8.12.0.pkg">here</a></p>
</li>
<li>
<p>Windows:</p>
<p>Download windows installer directly from <a href="https://nodejs.org/dist/v8.12.0/node-v8.12.0-x86.msi">here</a></p>
</li>
</ul>
</li>
<li>
<p>install docker</p>
<ul>
<li>
<p>Ubuntu/Debian:</p>
<pre class="hljs"><code><div>curl -fsSL get.docker.com -o get-docker.sh
sh get-docker.sh
<span class="hljs-comment"># For more instructions, see https://docs.docker.com/install/linux/docker-ce/ubuntu/</span>
</div></code></pre>
</li>
<li>
<p>MacOS:</p>
<p>Download macOS installer directly from <a href="https://download.docker.com/mac/stable/Docker.dmg">here</a>.
For more information, see <a href="https://docs.docker.com/docker-for-mac/install/">this document</a>.</p>
</li>
<li>
<p>Windows:</p>
<p>Download windows installer directly from <a href="https://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe">here</a>.
For more information, see <a href="https://docs.docker.com/docker-for-windows/install/">this document</a>.</p>
</li>
</ul>
</li>
</ol>
<h3 id="setup-integration-test-environment-before-running-tests">Setup Integration Test Environment (before running tests)</h3>
<ul>
<li>
<p>Run Redis Database</p>
<pre class="hljs"><code><div>docker pull redis
docker run -d --name redis -p 6379:6379 redis
</div></code></pre>
</li>
<li>
<p>Install Package</p>
<pre class="hljs"><code><div>mkdir helvar
<span class="hljs-built_in">cd</span> helvar
cp helvar-test-1.0.0.tgz .
npm install helvar-test-1.0.0.tgz  <span class="hljs-comment"># you can ignore the npm WARNs</span>
</div></code></pre>
</li>
</ul>
<h3 id="teardown-integration-test-environment-after-running-test">Teardown Integration Test Environment (after running test)</h3>
<ul>
<li>
<p>Remove Package</p>
<pre class="hljs"><code><div>rm -fr helvar
</div></code></pre>
</li>
<li>
<p>Terminate Redis Database</p>
<pre class="hljs"><code><div>docker stop redis
docker rm redis
docker rmi redis
docker volume prune -f
</div></code></pre>
</li>
</ul>
<h3 id="run-tests">Run Tests</h3>
<pre class="hljs"><code><div><span class="hljs-built_in">cd</span> helvar
node_modules/.bin/helvar-test /absolute/path/to/<span class="hljs-built_in">test</span>-data.json
</div></code></pre>
<p>After this, the devices can be verified at redis database by <em>redis-py</em>. For your debugging, 'helvar-test' will give error messages if something goes wrong. Remember that JSON file <strong>MUST</strong> be provided in an absolute path.</p>

    </body>
    </html>